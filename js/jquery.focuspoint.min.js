/**
 * jQuery FocusPoint; version: 1.1.1
 * Author: http://jonathonmenz.com
 * Source: https://github.com/jonom/jquery-focuspoint
 * Copyright (c) 2014 J. Menz; MIT License
 * @preserve
 */
!function(t){var a={reCalcOnWindowResize:!0,throttleDuration:17},n=function(t){var a=i(t);r(a,function(a,n){t.data({imageW:n.width,imageH:n.height}),e(t)})},i=function(t){var a=t.find("img").attr("currentSrc");return a=a?a:t.find("img").attr("src")},r=function(a,n){t("<img />").one("load",function(){n(null,{width:this.width,height:this.height})}).attr("src",a)},o=function(t,a){var n=!1;return function(){var i=Array.prototype.slice.call(arguments,0);return n?!1:(n=!0,void setTimeout(function(){n=!1,t.apply(null,i)},a))}},u=function(t,a,n,i,r){var o=Math.floor(a/2),u=(i+1)/2,e=Math.floor(n/t),f=Math.floor(u*e);r&&(f=e-f);var c=f-o,s=e-f,d=a-o;return d>s&&(c-=d-s),0>c&&(c=0),-100*c/a+"%"},e=function(t,a){a&&(t.data("imageW",t.attr("data-image-w")),t.data("imageH",t.attr("data-image-h")),t.data("focusX",t.attr("data-focus-x")),t.data("focusY",t.attr("data-focus-y")));var r=t.data("imageW"),o=t.data("imageH"),e=i(t);if(a||!r&&!o&&!e)return n(t);var f=t.width(),c=t.height(),s=parseFloat(t.data("focusX")),d=parseFloat(t.data("focusY")),h=t.find("img").first(),g=0,l=0;if(!(f>0&&c>0&&r>0&&o>0))return!1;var w=r/f,m=o/c;h.css({"max-width":"","max-height":""}),r>f&&o>c&&h.css(w>m?"max-height":"max-width","100%"),w>m?g=u(m,f,r,s):m>w&&(l=u(w,c,o,d,!0)),h.css({top:l,left:g})},f=t(window),c=function(t,a){var n=a.throttleDuration?o(function(){e(t)},a.throttleDuration):function(){e(t)},i=!1;return e(t),{adjustFocus:function(a){return e(t,a)},windowOn:function(){return i?void 0:(f.on("resize",n),i=!0)},windowOff:function(){return i?(f.off("resize",n),i=!1,!0):void 0}}};t.fn.focusPoint=function(n){if("string"==typeof n)return this.each(function(){var a=t(this);a.data("focusPoint")[n]()});var i=t.extend({},a,n);return this.each(function(){var a=t(this),n=c(a,i);a.data("focusPoint")&&a.data("focusPoint").windowOff(),a.data("focusPoint",n),i.reCalcOnWindowResize&&n.windowOn()})},t.fn.adjustFocus=function(){return this.each(function(){e(t(this))})}}(jQuery);
